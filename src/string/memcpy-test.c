/******************************************************************************
 *	Copyright (C) 2019	Alejandro Colomar Andr√©s		      *
 *	SPDX-License-Identifier:	LGPL-2.0-only			      *
 ******************************************************************************/


/******************************************************************************
 ******* headers **************************************************************
 ******************************************************************************/
#include "libalx/string/memcpy.h"

#include <stdbool.h>
#include <stdio.h>

#include "libalx/../../test/test.h"


/******************************************************************************
 ******* macros ***************************************************************
 ******************************************************************************/
#define BUFF_SIZE	(8)


/******************************************************************************
 ******* enums ****************************************************************
 ******************************************************************************/


/******************************************************************************
 ******* structs / unions *****************************************************
 ******************************************************************************/


/******************************************************************************
 ******* variables ************************************************************
 ******************************************************************************/
static	volatile	double	src_v = 6.7;
static			double	src_nv = 6.8;
static	volatile	double	dest_v = 6.9;
static			double	dest_nv = 7.0;


/******************************************************************************
 ******* static functions (prototypes) ****************************************
 ******************************************************************************/
int	test_alx_memcpy_vds(void);
int	test_alx_memcpy_vd(void);
int	test_alx_memcpy_vs(void);


/******************************************************************************
 ******* main *****************************************************************
 ******************************************************************************/
int main(void)
{
	int	fail = false;

	if (test_alx_memcpy_vds())
		fail = true;
	if (test_alx_memcpy_vd())
		fail = true;
	if (test_alx_memcpy_vs())
		fail = true;

	if (!fail)
		print_ok("	libalx/string/memcpy\n");

	return	0;
}


/******************************************************************************
 ******* static functions (definitions) ***************************************
 ******************************************************************************/
int	test_alx_memcpy_vds(void)
{

	src_v	= 1.5;
	alx_memcpy_vds(&dest_v, &src_v, sizeof(dest_v));
	if (dest_v != src_v) {
		print_fail("	libalx/string/memcpy:	alx_memcpy_vds()\n");
		return	1;
	}

	return	0;
}

int	test_alx_memcpy_vd(void)
{

	src_nv	= 2.2;
	alx_memcpy_vd(&dest_v, &src_nv, sizeof(dest_v));
	if (dest_v != src_nv) {
		print_fail("	libalx/string/memcpy:	alx_memcpy_vd()\n");
		return	1;
	}

	return	0;
}

int	test_alx_memcpy_vs(void)
{

	src_v	= 3.7;
	alx_memcpy_vs(&dest_nv, &src_v, sizeof(dest_nv));
	if (dest_nv != src_v) {
		print_fail("	libalx/string/memcpy:	alx_memcpy_vs()\n");
		return	1;
	}

	return	0;
}


/******************************************************************************
 ******* end of file **********************************************************
 ******************************************************************************/
